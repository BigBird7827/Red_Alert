<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Red Alert - LCARS Bridge Simulator</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --dark-red: #8b0000;
  --dark-blue: #001f4d;
  --gold: #c9a23d;
  --white: #ffffff;
  --black: #000000;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  background: var(--black);
  color: var(--white);
  font-family: 'Roboto Mono',monospace;
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

header,footer {
  width: 100%;
  text-align: center;
  padding: 6px;
  background: linear-gradient(to right,var(--dark-red),var(--gold));
  font-weight: bold;
  font-size: 1em;
  letter-spacing: 1.5px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

#alert-buttons {
  position: absolute;
  left: 12px;
  display: flex;
  gap: 8px;
}

.alert-btn {
  border: 1px solid rgba(255,255,255,0.4);
  border-radius: 6px;
  font-weight: bold;
  font-size: .85em;
  padding: 6px 10px;
  cursor: pointer;
  color: var(--white);
  background: linear-gradient(to bottom,rgba(255,255,255,.25),rgba(0,0,0,.4));
  transition: all .2s ease;
}

.alert-btn:hover {
  transform: scale(1.08);
}

#red-alert {
  background: linear-gradient(to bottom,#c00000,#4a0000);
}

#yellow-alert {
  background: linear-gradient(to bottom,#d1b200,#5c4b00);
}

#green-alert {
  background: linear-gradient(to bottom,#00a65a,#003d24);
}

#content-area {
  display: flex;
  flex: 1;
  width: 100%;
  overflow: hidden;
}

#status-panel {
  position: absolute;
  bottom: 12px;
  left: 0;
  right: 0;
  text-align: center;
  color: var(--gold);
  font-weight: bold;
  font-size: .85em;
  line-height: 1.4em;
  white-space: pre-line;
}

.lcars-btn {
  font-size: .85em;
  font-weight: bold;
  color: var(--white);
  padding: 10px;
  text-align: center;
  border-radius: 8px;
  cursor: pointer;
  border: 1px solid var(--gold);
  transition: all .2s ease;
}

.red-btn {
  background-color: var(--dark-red);
}

.blue-btn {
  background-color: var(--dark-blue);
}

.lcars-btn:hover {
  transform: scale(1.05);
}

#dialog-area {
  position: relative;
  flex: 1;
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
  padding: 20px 40px;
  background: rgba(0,0,0,.7);
  overflow: hidden;
}

#dialog-box {
  position: relative;
  z-index: 3;
  width: 100%;
  max-width: 1100px;
}

#fx-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  overflow: hidden;
}

.dialog-section {
  margin-bottom: 16px;
  text-shadow: -1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000;
}

h2 {
  color: var(--gold);
  font-size: 1em;
  margin-bottom: 8px;
}

#options {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 0;
  position: relative;
  z-index: 4;
}

#options button {
  background: linear-gradient(to bottom,#333,#111);
  border: 1px solid var(--gold);
  color: var(--gold);
  font-family: 'Roboto Mono',monospace;
  font-size: 1em;
  padding: 10px 22px;
  border-radius: 10px;
  cursor: pointer;
  transition: all .2s ease;
  font-weight: bold;
}

#options button:hover {
  transform: scale(1.05);
}

.hidden {
  display: none!important;
}

#debrief-overlay {
  position: absolute;
  inset: 0;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 5;
  text-align: center;
  padding: 0 60px;
}

#debrief-overlay.active {
  display: flex;
}

footer {
  transition: background .5s ease;
}

@keyframes doublePulse {
  0%{opacity: 0}25%{opacity:1}50%{opacity:0}75%{opacity:1}100%{opacity:0};
}

.fx-crosshatch-shield {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(45deg,rgba(255,230,180,.18)0,rgba(255,230,180,.18)2px,transparent 2px,transparent 12px),repeating-linear-gradient(-45deg,rgba(255,230,180,.18)0,rgba(255,230,180,.18)2px,transparent 2px,transparent 12px),radial-gradient(circle at 50% 50%,rgba(255,240,200,.25)0,rgba(255,200,140,.12)60%,rgba(100,70,40,.04)100%);
  background-size: 200% 200%;
  mix-blend-mode: screen;
  border: 1px solid rgba(255,220,160,.35);
  box-shadow: inset 0 0 40px rgba(255,220,160,.35),0 0 25px rgba(255,200,140,.45);
  animation: crosshatchFlow 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
  opacity: 0;
}

@keyframes crosshatchFlow {
  0%{background-position: 0% 50%;
  opacity: 0}25%{background-position:25% 75%;
  opacity: 1}50%{background-position:50% 50%;
  opacity: .6}75%{background-position:75% 25%;
  opacity: 1}100%{background-position:100% 50%;
  opacity: 0};
}

.fx-plasma-conduit {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(35deg,rgba(255,190,100,.25)0,rgba(200,80,20,.18)8px,transparent 14px,transparent 24px);
  background-size: 200% 200%;
  box-shadow: inset 0 0 60px rgba(255,200,140,.35);
  mix-blend-mode: screen;
  animation: plasmaFlow 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
  opacity: 0;
}

@keyframes plasmaFlow {
  0%{background-position: 0% 50%;
  opacity: 0}25%{background-position:50% 50%;
  opacity: 1}50%{background-position:100% 50%;
  opacity: .5}75%{background-position:50% 50%;
  opacity: 1}100%{background-position:0% 50%;
  opacity: 0};
}

.fx-subspace-resonance {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 50%,rgba(255,230,190,.35)0,rgba(255,210,140,.2)20%,rgba(255,190,120,.08)40%,transparent 60%);
  mix-blend-mode: screen;
  animation: resonanceWave 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
  opacity: 0;
}

@keyframes resonanceWave {
  0%{transform: scale(.8);
  opacity: 0}25%{transform:scale(1);
  opacity: 1}50%{transform:scale(1.1);
  opacity: .6}75%{transform:scale(1);
  opacity: 1}100%{transform:scale(.8);
  opacity: 0};
}

.fx-plasma-explosion {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 50%,rgba(255,240,200,.9)0,rgba(255,180,90,.5)25%,rgba(120,60,20,.1)70%,transparent 100%);
  mix-blend-mode: screen;
  animation: explosionFlash 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
  opacity: 0;
}

@keyframes explosionFlash {
  0%{transform: scale(.5);
  opacity: 0}15%{transform:scale(1.2);
  opacity: 1}50%{transform:scale(1.5);
  opacity: .6}75%{transform:scale(1.2);
  opacity: 1}100%{transform:scale(.5);
  opacity: 0};
}

.fx-data-network {
  position: absolute;
  inset: 0;
  mix-blend-mode: screen;
  animation: dataNodes 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
}

@keyframes dataNodes {
  0%,100%{opacity: 0}25%,75%{opacity:1};
}

.fx-subspace-wave {
  position: absolute;
  inset: 0;
  background: linear-gradient(0deg,transparent 35%,rgba(255,230,180,.25)50%,transparent 65%);
  background-size: 100% 200%;
  mix-blend-mode: screen;
  animation: waveTravel 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
  opacity: 0;
}

@keyframes waveTravel {
  0%{background-position: 0% 100%;
  opacity: 0}25%{background-position:0% 50%;
  opacity: 1}50%{background-position:0% 0%;
  opacity: .6}75%{background-position:0% 50%;
  opacity: 1}100%{background-position:0% 100%;
  opacity: 0};
}

.fx-subspace-wave-short {
  position: absolute;
  top: 33%;
  height: 34%;
  left: 0;
  right: 0;
  background: linear-gradient(0deg,transparent 35%,rgba(255,230,180,.25)50%,transparent 65%);
  background-size: 100% 200%;
  mix-blend-mode: screen;
  animation: waveTravel 3s ease-in-out forwards,doublePulse 3s ease-in-out forwards;
  opacity: 0;
}

.fx-vital-svg {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  animation: doublePulse 3s ease-in-out forwards;
}

.fx-vital-svg svg {
  width: 120px;
  height: 260px;
}

.fx-vital-svg path {
  fill: none;
  stroke: rgba(255,240,190,.8);
  stroke-width: 3;
  filter: drop-shadow(0 0 10px rgba(255,240,190,.8));
  animation: svgPulse 3s ease-in-out infinite;
}

@keyframes svgPulse {
  0%{stroke-opacity: .4}25%{stroke-opacity:1}50%{stroke-opacity:.6}75%{stroke-opacity:1}100%{stroke-opacity:.4};
}

.lcars-btn {
  background: linear-gradient(to bottom, rgba(255,255,255,0.25), rgba(0,0,0,0.6)), linear-gradient(to top, rgba(255,255,255,0.15), rgba(255,255,255,0));
  border: 1px solid var(--gold);
  border-radius: 8px;
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.3), inset 0 -2px 3px rgba(0,0,0,0.6), 0 2px 4px rgba(0,0,0,0.5);
  color: var(--white);
  padding: 10px;
  font-weight: bold;
  text-align: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.lcars-btn:hover {
  transform: scale(1.05);
  box-shadow: inset 0 1px 3px rgba(255,255,255,0.4), 0 0 8px rgba(255,215,120,0.7);
}

.red-btn {
  background: linear-gradient(to bottom, rgba(255,255,255,0.25), rgba(0,0,0,0.6)), linear-gradient(to top, rgba(255,255,255,0.15), rgba(255,255,255,0)), linear-gradient(to bottom, #c00000, #4a0000);
}

.blue-btn {
  background: linear-gradient(to bottom, rgba(255,255,255,0.25), rgba(0,0,0,0.6)), linear-gradient(to top, rgba(255,255,255,0.15), rgba(255,255,255,0)), linear-gradient(to bottom, #0a2a6b, #001f4d);
}

.begin-mission-btn {
  background: linear-gradient(to bottom, #333, #111);
  border: 1px solid var(--gold);
  color: var(--gold);
  font-family: 'Roboto Mono', monospace;
  font-size: 1em;
  padding: 10px 22px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: bold;
  margin-top: 20px;
}

.begin-mission-btn:hover {
  transform: scale(1.05);
  background: linear-gradient(to bottom, #444, #222);
}

#alert-panel {
  flex: 0 0 auto;
}

#status-panel {
  flex: 0 0 auto;
}

#alert-panel {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

#status-panel {
  position: static;
  flex: 0 0 auto;
  margin-top: 10px;
  width: 100%;
  text-align: center;
}

#left-panel {
  width: 240px;
  background: rgba(20,20,20,0.9);
  border-right: 3px solid var(--gold);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 8px;
  position: relative;
}

#lcars-buttons {
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 6px;
  position: relative;
}

#communique {
  background: rgba(0, 25, 80, 0.85);
  border: 1px solid var(--gold);
  color: var(--white);
  padding: 14px 18px;
  border-radius: 10px;
}

#mission {
  background: rgba(0, 25, 80, 0.85);
  border: 1px solid var(--gold);
  color: var(--white);
  padding: 14px 18px;
  border-radius: 10px;
}

#dialog {
  background: rgba(0, 77, 31, 0.75);
  border: 1px solid var(--gold);
  color: var(--white);
  padding: 14px 18px;
  border-radius: 10px;
}

</style>
</head>
<body>
<header>
  <div id="alert-buttons">
    <div class="alert-btn" id="green-alert">Green Alert</div>
    <div class="alert-btn" id="yellow-alert">Yellow Alert</div>
    <div class="alert-btn" id="red-alert">Red Alert</div>
  </div>
  LCARS COMMAND INTERFACE - USS ENTERPRISE-D
</header>
<div id="content-area">
  <div id="left-panel">
    <div id="lcars-buttons">
      <div class="lcars-btn red-btn" data-key="shields">Shields</div>
      <div class="lcars-btn blue-btn" data-key="weapons">Weapons</div>
      <div class="lcars-btn red-btn" data-key="comms">Comms</div>
      <div class="lcars-btn blue-btn" data-key="damage">Damage Control</div>
      <div class="lcars-btn red-btn" data-key="computer">Main Computer</div>
      <div class="lcars-btn blue-btn" data-key="shortscan">Short Range Scan</div>
      <div class="lcars-btn red-btn" data-key="longscan">Long Range Scan</div>
      <div class="lcars-btn blue-btn" data-key="lifesupport">Life Support</div>
    </div>
    <div id="status-panel"></div>
  </div>
  <div id="dialog-area">
    <div id="dialog-box">
      <div id="fx-layer"></div>
      <div class="dialog-section" id="communique"></div>
      <div class="dialog-section" id="mission"></div>
      <div class="dialog-section" id="dialog"></div>
      <div class="dialog-section" id="options"></div>
      <div class="dialog-section" id="debrief"></div>
    </div>
    <div id="debrief-overlay">
      <div class="debrief-content" id="debrief-content"></div>
    </div>
  </div>
</div>
<footer>STARFLEET COMMAND | UNITED FEDERATION OF PLANETS</footer>
<script>
const REMOTE_JSON_URL='https://raw.githubusercontent.com/BigBird7827/Red_Alert/main/Red%20Alert.json'
let scenarios=[],currentScenario=0,currentNode=0,missionActive=false
async function loadScenarios(){
  try{
    const res=await fetch(REMOTE_JSON_URL,{cache:'no-store'})
    scenarios=await res.json()
  }catch(e){
    document.getElementById('communique').innerHTML='<h2>STARFLEET COMMUNIQUÉ</h2><p>Unable to load mission data.</p>'
    return
  }
  displayScenario(0)
}
function fadeTransition(el,newHTML){el.innerHTML=newHTML}
function displayScenario(index){
  currentScenario=index;currentNode=0;missionActive=false
  const dialog=document.getElementById('dialog')
  const options=document.getElementById('options')
  document.getElementById('debrief-overlay').classList.remove('active')
  document.getElementById('debrief-overlay').style.display='none'
  document.getElementById('communique').classList.remove('hidden')
  document.getElementById('mission').classList.remove('hidden')
  dialog.classList.remove('hidden')
  options.classList.remove('hidden')
  dialog.classList.remove('dialog-top')
  options.classList.remove('options-top')
  document.getElementById('debrief').innerHTML=''
  document.getElementById('debrief-content').innerHTML=''
  const s=scenarios[index]
  fadeTransition(document.getElementById('communique'),'<h2>STARFLEET COMMUNIQUÉ</h2><p>'+s.starfleet_message+'</p>')
  fadeTransition(document.getElementById('mission'),'<h2>MISSION DESCRIPTION</h2><p>'+s.mission_description+'</p>')
  renderDialogueNode()
}
function renderDialogueNode(){
  const s=scenarios[currentScenario]
  const node=s.dialogue_tree[currentNode]
  if(!node){showDebrief();return}
  const dialog=document.getElementById('dialog')
  const options=document.getElementById('options')
  fadeTransition(dialog,'<h2>'+node.crew.toUpperCase()+'</h2><p>'+node.line+'</p>')
  options.innerHTML=''
  node.options.forEach(opt=>{
    const btn=document.createElement('button')
    btn.textContent=opt.label
    btn.onclick=()=>{
      if(!missionActive){
        missionActive=true
        document.getElementById('communique').classList.add('hidden')
        document.getElementById('mission').classList.add('hidden')
        dialog.classList.add('dialog-top')
        options.classList.add('options-top')
      }
      dialog.innerHTML+= '<p><strong>'+opt.crew_reply+'</strong></p>'
      if(opt.next!==undefined&&s.dialogue_tree[opt.next]){currentNode=opt.next;renderDialogueNode()}else{showDebrief()}
    }
    options.appendChild(btn)
  })
}
function showDebrief(){
  const s=scenarios[currentScenario]
  const d=s.debriefs[Math.floor(Math.random()*s.debriefs.length)]
  document.getElementById('dialog').classList.add('hidden')
  document.getElementById('options').classList.add('hidden')
  const overlay=document.getElementById('debrief-overlay')
  const content=document.getElementById('debrief-content')
  content.innerHTML='<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;"><div style="text-align:center;"><h2>DEBRIEF</h2><p>'+d.text+'</p></div><button class="begin-mission-btn" onclick="restart()">Begin New Mission</button></div>'
  overlay.style.display='flex'
  overlay.classList.add('active')
}
function restart(){const next=(currentScenario+1)%scenarios.length;displayScenario(next)}
loadScenarios()
const systems={shields:{inactive:'Shields Inactive',active:'Shields Up',state:false},weapons:{inactive:'Weapons on Standby',active:'Weapons Systems Ready',state:false},comms:{inactive:'Comms Offline',active:'Hailing Frequencies Open',state:false},damage:{inactive:'Damage Control Idle',active:'Damage Control Teams Dispatched',state:false},computer:{inactive:'Main Computer Offline',active:'Main Computer Ready',state:false},shortscan:{inactive:'Short Range Scans Offline',active:'Short Range Scans Active',state:false},longscan:{inactive:'Long Range Scans Offline',active:'Long Range Scans Active',state:false},lifesupport:{inactive:'Life Support Optimal',active:'Life Support Compromised',state:false}}
const statusPanel=document.getElementById('status-panel')
function updateStatusDisplay(){statusPanel.innerHTML=Object.entries(systems).map(([k,sys])=>'<div>'+(sys.state?sys.active:sys.inactive)+'</div>').join('')}
updateStatusDisplay()
const fxLayer=document.getElementById('fx-layer')
function clearFx(){fxLayer.innerHTML=''}
function fxShields(){const e=document.createElement('div');e.className='fx-crosshatch-shield';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxWeapons(){const e=document.createElement('div');e.className='fx-plasma-conduit';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxComms(){const e=document.createElement('div');e.className='fx-subspace-resonance';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxDamage(){const e=document.createElement('div');e.className='fx-plasma-explosion';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxComputer(){const e=document.createElement('div');e.className='fx-data-network';for(let i=0;i<16;i++){const d=document.createElement('div');d.style.position='absolute';d.style.width='6px';d.style.height='6px';d.style.borderRadius='50%';d.style.background='rgba(255,220,140,0.9)';d.style.top=(Math.random()*90)+'%';d.style.left=(Math.random()*90)+'%';d.style.boxShadow='0 0 10px rgba(255,220,140,0.8)';fxLayer.appendChild(d)};fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxShortScan(){const e=document.createElement('div');e.className='fx-subspace-wave-short';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxLongScan(){const e=document.createElement('div');e.className='fx-subspace-wave';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
function fxLifeSupport(){const e=document.createElement('div');e.className='fx-vital-svg';e.innerHTML='<svg viewBox="0 0 120 260"><path d="M60,30 C80,30 90,50 90,70 C90,110 80,130 80,160 C80,180 90,200 60,200 C30,200 40,180 40,160 C40,130 30,110 30,70 C30,50 40,30 60,30 Z" /><circle cx="60" cy="15" r="12" /></svg>';fxLayer.appendChild(e);setTimeout(clearFx,3000)}
const effectMap={shields:fxShields,weapons:fxWeapons,comms:fxComms,damage:fxDamage,computer:fxComputer,shortscan:fxShortScan,longscan:fxLongScan,lifesupport:fxLifeSupport}
document.querySelectorAll('#lcars-buttons .lcars-btn').forEach(btn=>{const key=btn.dataset.key;btn.addEventListener('click',()=>{const sys=systems[key];if(sys){sys.state=!sys.state;updateStatusDisplay()}clearFx();const fx=effectMap[key];if(typeof fx==='function')fx()})})
</script>

<script>
(function(){
  const headerEl = document.querySelector("header");
  const footerEl = document.querySelector("footer");
  function ensureAlertImage(){
    let img = document.getElementById("alert-image");
    if(!img){
      const left = document.getElementById("left-panel");
      if(left){
        let panel = document.getElementById("alert-panel");
        if(!panel){
          panel = document.createElement("div");
          panel.id = "alert-panel";
          panel.style.display = "flex";
          panel.style.alignItems = "center";
          panel.style.justifyContent = "center";
          panel.style.width = "100%";
          panel.style.padding = "8px 0";
          left.insertBefore(panel, left.firstChild);
        }
        img = document.createElement("img");
        img.id = "alert-image";
        img.alt = "Alert Status";
        img.style.width = "150px";
        img.style.height = "auto";
        panel.appendChild(img);
      }
    }
    return img;
  }
  function setAlert(state){
    const img = ensureAlertImage();
    if(state === "red"){
      headerEl.style.background="linear-gradient(to right,#8b0000,#500000)";
      footerEl.style.background="linear-gradient(to right,#8b0000,#500000)";
      if(img) img.src="https://raw.githubusercontent.com/BigBird7827/Red_Alert/main/Red%20Alert.gif";
    } else if(state === "yellow"){
      headerEl.style.background="linear-gradient(to right,#bfa200,#8c7a00)";
      footerEl.style.background="linear-gradient(to right,#bfa200,#8c7a00)";
      if(img) img.src="https://raw.githubusercontent.com/BigBird7827/Red_Alert/main/Yellow%20Alert.gif";
    } else {
      headerEl.style.background="linear-gradient(to right,#006b3c,#00a65a)";
      footerEl.style.background="linear-gradient(to right,#006b3c,#00a65a)";
      if(img) img.src="https://raw.githubusercontent.com/BigBird7827/Red_Alert/main/Green%20Alert.gif";
    }
  }
  const redBtn = document.getElementById("red-alert");
  const yellowBtn = document.getElementById("yellow-alert");
  const greenBtn = document.getElementById("green-alert");
  if(redBtn) redBtn.addEventListener("click",()=>setAlert("red"));
  if(yellowBtn) yellowBtn.addEventListener("click",()=>setAlert("yellow"));
  if(greenBtn) greenBtn.addEventListener("click",()=>setAlert("green"));
  // Initialize default
  setAlert("green");
})();
</script>

</body>
</html>
